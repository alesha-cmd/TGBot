try:
                    # Ждем 5 секунд после ответа пользователя
                    if state.last_response_time:
                        await asyncio.sleep(30)
                        state.last_response_time = None
                    
                    # Сбрасываем флаг ожидания ответа
                    state.user_responded.clear()
                    
                    # Цикл напоминаний каждые 5 секунд до ответа
                    while not state.user_responded.is_set() and state.is_active:
                        await self._send_reminder(state)
                        
                        # Ждем 5 секунд или пока пользователь не ответит
                        try:
                            await asyncio.wait_for(
                                state.user_responded.wait(),
                                timeout=5.0
                            )
                            # Если дождались ответа - выходим из внутреннего цикла
                            if state.mark_user_responded:
                                break
                        except asyncio.TimeoutError:
                            # Прошло 5 секунд - продолжаем цикл
                            continue